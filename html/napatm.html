<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Nạp ATM - PDO OOP</title>
    <link rel="stylesheet" href="../assets/style.css" />
  </head>
  <body>
    <div id="qr">
      <div class="container">
        <div class="text">Tạo mã nạp tiền (QR VietQR)</div>

        <form method="post">
          <div class="input-box">
            <div>Ngân hàng:</div>
            <input name="bank_name" value="MB" required />
          </div>
          <div class="input-box">
            <div>Số tài khoản:</div>
            <input name="account_number" value="0978123456" required />
          </div>
          <div class="input-box">
            <div>Tên chủ tài khoản:</div>
            <input name="account_name" value="PHAN LE BA KHANG" required />
          </div>
          <div class="input-box">
            <div>Số tiền (VNĐ):</div>
            <input type="number" name="amount" required />
          </div>
          <button type="submit">Tạo QR</button>
        </form>

        <?php if ($error): ?>
        <p style="color: red"><?=htmlspecialchars($error)?></p>
        <?php endif; ?>

        <?php if ($result): ?>
        <div class="box-qr">
          <h3>Quét mã để nạp tiền</h3>
          <div class="img-qr">
            <img src="<?=htmlspecialchars($result['qr_url'])?>" width="260" />
          </div>
          <div class="box-tt">
            <div class="box">
              <div>Nội dung:</div>
              <div class="input-nhap">
                <?=htmlspecialchars($result['content'])?>
              </div>
            </div>
            <div class="box">
              <div>Số tiền:</div>
              <div class="input-nhap">
                <?=number_format($result['amount'],0,',','.')?>đ
              </div>
            </div>
          </div>
          <?php endif; ?>
        </div>
      </div>
    </div>
  </body>
</html>
